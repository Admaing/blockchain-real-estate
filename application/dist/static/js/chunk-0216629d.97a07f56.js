(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-0216629d"],{"135f":function(e,t,r){},"1c0b":function(e,t,r){"use strict";r.d(t,"a",(function(){return n})),r.d(t,"b",(function(){return i}));var a=r("b775");function n(e){return Object(a["a"])({url:"/createRealEstate",method:"post",data:e})}function i(e){return Object(a["a"])({url:"/queryRealEstateList",method:"post",data:e})}},"49fc":function(e,t,r){"use strict";var a=r("135f"),n=r.n(a);n.a},"945e":function(e,t,r){"use strict";r.d(t,"c",(function(){return n})),r.d(t,"d",(function(){return i})),r.d(t,"b",(function(){return l})),r.d(t,"e",(function(){return o})),r.d(t,"a",(function(){return s}));var a=r("b775");function n(e){return Object(a["a"])({url:"/querySellingList",method:"post",data:e})}function i(e){return Object(a["a"])({url:"/querySellingListByBuyer",method:"post",data:e})}function l(e){return Object(a["a"])({url:"/createSellingByBuy",method:"post",data:e})}function o(e){return Object(a["a"])({url:"/updateSelling",method:"post",data:e})}function s(e){return Object(a["a"])({url:"/createSelling",method:"post",data:e})}},e825:function(e,t,r){"use strict";r.r(t);var a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"container"},[r("el-alert",{attrs:{type:"success"}},[r("p",[e._v("账户ID: "+e._s(e.accountId))]),e._v(" "),r("p",[e._v("用户名: "+e._s(e.userName))]),e._v(" "),r("p",[e._v("余额: ￥"+e._s(e.balance)+" 元")]),e._v(" "),r("p",[e._v("当发起出售、捐赠或质押操作后，担保状态为true")]),e._v(" "),r("p",[e._v("当担保状态为false时，才可发起出售、捐赠或质押操作")])]),e._v(" "),0==e.realEstateList.length?r("div",{staticStyle:{"text-align":"center"}},[r("el-alert",{attrs:{title:"查询不到数据",type:"warning"}})],1):e._e(),e._v(" "),r("el-row",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],attrs:{gutter:20}},e._l(e.realEstateList,(function(t,a){return r("el-col",{key:a,attrs:{span:6,offset:1}},[r("el-card",{staticClass:"realEstate-card"},[r("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[e._v("\n          担保状态:\n          "),r("span",{staticStyle:{color:"rgb(255, 0, 0)"}},[e._v(e._s(t.encumbrance))])]),e._v(" "),r("div",{staticClass:"item"},[r("el-tag",[e._v("房产ID: ")]),e._v(" "),r("span",[e._v(e._s(t.realEstateId))])],1),e._v(" "),r("div",{staticClass:"item"},[r("el-tag",{attrs:{type:"success"}},[e._v("业主ID: ")]),e._v(" "),r("span",[e._v(e._s(t.proprietor))])],1),e._v(" "),r("div",{staticClass:"item"},[r("el-tag",{attrs:{type:"warning"}},[e._v("总空间: ")]),e._v(" "),r("span",[e._v(e._s(t.totalArea)+" ㎡")])],1),e._v(" "),r("div",{staticClass:"item"},[r("el-tag",{attrs:{type:"danger"}},[e._v("居住空间: ")]),e._v(" "),r("span",[e._v(e._s(t.livingSpace)+" ㎡")])],1),e._v(" "),t.encumbrance||"admin"===e.roles[0]?e._e():r("div",[r("el-button",{attrs:{type:"text"},on:{click:function(r){return e.openDialog(t)}}},[e._v("出售")]),e._v(" "),r("el-divider",{attrs:{direction:"vertical"}}),e._v(" "),r("el-button",{attrs:{type:"text"}},[e._v("捐赠")]),e._v(" "),r("el-divider",{attrs:{direction:"vertical"}}),e._v(" "),r("el-button",{attrs:{type:"text"}},[e._v("质押")])],1),e._v(" "),"admin"===e.roles[0]?r("el-rate"):e._e()],1)],1)})),1),e._v(" "),r("el-dialog",{directives:[{name:"loading",rawName:"v-loading",value:e.loadingDialog,expression:"loadingDialog"}],attrs:{visible:e.dialogCreateSelling,"close-on-click-modal":!1},on:{"update:visible":function(t){e.dialogCreateSelling=t},close:function(t){return e.resetForm("realForm")}}},[r("el-form",{ref:"realForm",attrs:{model:e.realForm,rules:e.rules,"label-width":"100px"}},[r("el-form-item",{attrs:{label:"价格 (元)",prop:"price"}},[r("el-input-number",{attrs:{precision:2,step:1e4,min:0},model:{value:e.realForm.price,callback:function(t){e.$set(e.realForm,"price",t)},expression:"realForm.price"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"有效期 (天)",prop:"salePeriod"}},[r("el-input-number",{attrs:{min:1},model:{value:e.realForm.salePeriod,callback:function(t){e.$set(e.realForm,"salePeriod",t)},expression:"realForm.salePeriod"}})],1)],1),e._v(" "),r("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.createSelling("realForm")}}},[e._v("立即出售")]),e._v(" "),r("el-button",{on:{click:function(t){e.dialogCreateSelling=!1}}},[e._v("取 消")])],1)],1)],1)},n=[],i=(r("8e6e"),r("ac6a"),r("456d"),r("bd86")),l=r("2f62"),o=r("1c0b"),s=r("945e");function c(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function u(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?c(Object(r),!0).forEach((function(t){Object(i["a"])(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):c(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var d={name:"RealeState",data:function(){var e=function(e,t,r){t<=0?r(new Error("必须大于0")):r()};return{loading:!0,loadingDialog:!1,realEstateList:[],dialogCreateSelling:!1,realForm:{price:0,salePeriod:0},rules:{price:[{validator:e,trigger:"blur"}],salePeriod:[{validator:e,trigger:"blur"}]},valItem:{}}},computed:u({},Object(l["b"])(["accountId","roles","userName","balance"])),created:function(){var e=this;"admin"===this.roles[0]?Object(o["b"])().then((function(t){null!==t&&(e.realEstateList=t),e.loading=!1})).catch((function(t){e.loading=!1})):Object(o["b"])({proprietor:this.accountId}).then((function(t){null!==t&&(e.realEstateList=t),e.loading=!1})).catch((function(t){e.loading=!1}))},methods:{openDialog:function(e){this.dialogCreateSelling=!0,this.valItem=e},createSelling:function(e){var t=this;this.$refs[e].validate((function(e){if(!e)return!1;t.$confirm("是否立即出售?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"success"}).then((function(){t.loadingDialog=!0,Object(s["a"])({objectOfSale:t.valItem.realEstateId,seller:t.valItem.proprietor,price:t.realForm.price,salePeriod:t.realForm.salePeriod}).then((function(e){t.loadingDialog=!1,t.dialogCreateSelling=!1,null!==e?t.$message({type:"success",message:"出售成功!"}):t.$message({type:"error",message:"出售失败!"}),setTimeout((function(){t.$router.go(0)}),1e3)})).catch((function(e){t.loadingDialog=!1,t.dialogCreateSelling=!1}))})).catch((function(){t.loadingDialog=!1,t.dialogCreateSelling=!1,t.$message({type:"info",message:"已取消出售"})}))}))},resetForm:function(e){this.$refs[e].resetFields()}}},v=d,p=(r("49fc"),r("2877")),g=Object(p["a"])(v,a,n,!1,null,null,null);t["default"]=g.exports}}]);